!function(a){"use strict";function b(){}b.prototype.on=function(a,b){return this._collection=this._collection||{},this._collection[a]=this._collection[a]||[],this._collection[a].push(b),this},b.prototype.once=function(a,b){function c(){d.off(a,c),b.apply(this,arguments)}var d=this;return c.listener=b,this.on(a,c),this},b.prototype.off=function(a,b){var c=this._collection[a],d=0;if(void 0!==c)for(d;d<c.length;d+=1)if(c[d]===b||c[d].listener===b){c.splice(d,1);break}return 0===c.length&&this.removeAllListeners(a),this},b.prototype.removeAllListeners=function(a){return this._collection=this._collection||{},delete this._collection[a],this},b.prototype.listeners=function(a){return this._collection=this._collection||{},this._collection[a]},b.prototype.emit=function(){var a,b=[].slice.call(arguments,0),c=b.shift(),d=this._collection[c],e=0;if(d)for(d=d.slice(0),a=d.length,e;a>e;e+=1)d[e].apply(this,b);return this},"function"==typeof a.define&&void 0!==a.define.amd?a.define("Jvent",[],function(){return b}):"undefined"!=typeof module&&void 0!==module.exports?module.exports=b:a.Jvent=b}(this);function(a){"use strict";function l(){if(i||j){var a=i?"resize":"scroll";this.refresh(),i=!1,j=!1,this.emit(a)}}function m(){return this instanceof m||void 0!==m.getInstance?m.getInstance?m.getInstance:(this.init(),this):new m}var b=a,c=b.document,d=c.documentElement,e=b.Jvent,f=b.addEventListener||b.attachEvent,g=f===b.attachEvent?"onresize":"resize",h=f===b.attachEvent?"onscroll":"scroll",i=!1,j=!1,k=function(){return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||function(b){a.setTimeout(b,1e3/60)}}();f(g,function(){i=!0}),f(h,function(){j=!0}),m.prototype=new e,m.prototype.init=function(){var a=this;return a.refresh(),a.calculateDeviceDimensions(),function b(){k(b),l.call(a)}(),m.getInstance=this,this},m.prototype.device={},m.prototype.calculateDimensions=function(){return this.height=d.clientHeight,this.width=d.clientWidth,this},m.prototype.calculateDeviceDimensions=function(){return this.device.height=b.screen.height,this.device.width=b.screen.width,this},m.prototype.calculateScroll=function(){var f,a=this.scrollY,e=this.height+a;return this.scrollY=b.pageYOffset||d.scrollTop,this.scrollX=b.pageXOffset||d.scrollLeft,f=this.height+this.scrollY,a!==this.scrollY&&0===this.scrollY?this.emit("top"):e!==f&&f>=c.body.scrollHeight&&this.emit("bottom"),this},m.prototype.calculateOffset=function(){return this.top=this.scrollY,this.right=this.scrollX+this.width,this.bottom=this.scrollY+this.height,this.left=this.scrollX,this},m.prototype.calculateMousePostition=function(b){var e=0,f=0;return b=b||a.event,b.pageX||b.pageY?(e=b.pageX,f=b.pageY):(e=b.clientX+c.body.scrollLeft+d.scrollLeft,f=b.clientY+c.body.scrollTop+d.scrollTop),{posX:e,posY:f}},m.prototype.calculateOrientation=function(){return this.orientation=90===Math.abs(b.orientation)?"landscape":"portrait",this},m.prototype.inViewport=function(a){var b=a.getBoundingClientRect();return b.top>=0&&b.right<=this.width&&b.bottom<=this.height&&b.left>=0},m.prototype.isVisible=function(a){var b=a.getBoundingClientRect();return b.bottom>=0&&b.top<=this.height},m.prototype.refresh=function(){return this.calculateDimensions(),this.calculateScroll(),this.calculateOffset(),this.calculateOrientation(),this},"function"==typeof a.define&&void 0!==a.define.amd?a.define("viewport",[],function(){return new m}):"undefined"!=typeof module&&void 0!==module.exports?module.exports=new m:a.viewport=new m()}(this);